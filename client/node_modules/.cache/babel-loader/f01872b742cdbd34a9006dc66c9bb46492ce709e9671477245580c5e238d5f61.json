{"ast":null,"code":"// Booking storage utilities for preserving selection through login\n\nconst BOOKING_KEY = 'pendingBooking';\nexport function saveBookingPayload(payload) {\n  try {\n    // Validate payload structure\n    if (!payload || typeof payload !== 'object') {\n      console.warn('Invalid booking payload');\n      return false;\n    }\n\n    // Required fields\n    const required = ['movieId', 'showtimeId', 'selectedSeats'];\n    for (const field of required) {\n      if (!payload[field]) {\n        console.warn(`Missing required field: ${field}`);\n        return false;\n      }\n    }\n\n    // Optional but recommended\n    if (!Array.isArray(payload.selectedSeats) || payload.selectedSeats.length === 0) {\n      console.warn('selectedSeats must be a non-empty array');\n      return false;\n    }\n    localStorage.setItem(BOOKING_KEY, JSON.stringify(payload));\n    return true;\n  } catch (error) {\n    console.error('Failed to save booking payload:', error);\n    return false;\n  }\n}\nexport function getBookingPayload() {\n  try {\n    const stored = localStorage.getItem(BOOKING_KEY);\n    if (!stored) return null;\n    const payload = JSON.parse(stored);\n\n    // Basic validation\n    if (!payload || !payload.movieId || !payload.selectedSeats) {\n      console.warn('Invalid stored booking payload');\n      clearBookingPayload();\n      return null;\n    }\n    return payload;\n  } catch (error) {\n    console.error('Failed to retrieve booking payload:', error);\n    clearBookingPayload();\n    return null;\n  }\n}\nexport function clearBookingPayload() {\n  localStorage.removeItem(BOOKING_KEY);\n}\nexport function hasPendingBooking() {\n  return getBookingPayload() !== null;\n}","map":{"version":3,"names":["BOOKING_KEY","saveBookingPayload","payload","console","warn","required","field","Array","isArray","selectedSeats","length","localStorage","setItem","JSON","stringify","error","getBookingPayload","stored","getItem","parse","movieId","clearBookingPayload","removeItem","hasPendingBooking"],"sources":["/home/nandita/Downloads/movie-booking/client/src/utils/bookingStorage.js"],"sourcesContent":["// Booking storage utilities for preserving selection through login\n\nconst BOOKING_KEY = 'pendingBooking'\n\nexport function saveBookingPayload(payload) {\n  try {\n    // Validate payload structure\n    if (!payload || typeof payload !== 'object') {\n      console.warn('Invalid booking payload')\n      return false\n    }\n\n    // Required fields\n    const required = ['movieId', 'showtimeId', 'selectedSeats']\n    for (const field of required) {\n      if (!payload[field]) {\n        console.warn(`Missing required field: ${field}`)\n        return false\n      }\n    }\n\n    // Optional but recommended\n    if (!Array.isArray(payload.selectedSeats) || payload.selectedSeats.length === 0) {\n      console.warn('selectedSeats must be a non-empty array')\n      return false\n    }\n\n    localStorage.setItem(BOOKING_KEY, JSON.stringify(payload))\n    return true\n  } catch (error) {\n    console.error('Failed to save booking payload:', error)\n    return false\n  }\n}\n\nexport function getBookingPayload() {\n  try {\n    const stored = localStorage.getItem(BOOKING_KEY)\n    if (!stored) return null\n\n    const payload = JSON.parse(stored)\n\n    // Basic validation\n    if (!payload || !payload.movieId || !payload.selectedSeats) {\n      console.warn('Invalid stored booking payload')\n      clearBookingPayload()\n      return null\n    }\n\n    return payload\n  } catch (error) {\n    console.error('Failed to retrieve booking payload:', error)\n    clearBookingPayload()\n    return null\n  }\n}\n\nexport function clearBookingPayload() {\n  localStorage.removeItem(BOOKING_KEY)\n}\n\nexport function hasPendingBooking() {\n  return getBookingPayload() !== null\n}"],"mappings":"AAAA;;AAEA,MAAMA,WAAW,GAAG,gBAAgB;AAEpC,OAAO,SAASC,kBAAkBA,CAACC,OAAO,EAAE;EAC1C,IAAI;IACF;IACA,IAAI,CAACA,OAAO,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE;MAC3CC,OAAO,CAACC,IAAI,CAAC,yBAAyB,CAAC;MACvC,OAAO,KAAK;IACd;;IAEA;IACA,MAAMC,QAAQ,GAAG,CAAC,SAAS,EAAE,YAAY,EAAE,eAAe,CAAC;IAC3D,KAAK,MAAMC,KAAK,IAAID,QAAQ,EAAE;MAC5B,IAAI,CAACH,OAAO,CAACI,KAAK,CAAC,EAAE;QACnBH,OAAO,CAACC,IAAI,CAAC,2BAA2BE,KAAK,EAAE,CAAC;QAChD,OAAO,KAAK;MACd;IACF;;IAEA;IACA,IAAI,CAACC,KAAK,CAACC,OAAO,CAACN,OAAO,CAACO,aAAa,CAAC,IAAIP,OAAO,CAACO,aAAa,CAACC,MAAM,KAAK,CAAC,EAAE;MAC/EP,OAAO,CAACC,IAAI,CAAC,yCAAyC,CAAC;MACvD,OAAO,KAAK;IACd;IAEAO,YAAY,CAACC,OAAO,CAACZ,WAAW,EAAEa,IAAI,CAACC,SAAS,CAACZ,OAAO,CAAC,CAAC;IAC1D,OAAO,IAAI;EACb,CAAC,CAAC,OAAOa,KAAK,EAAE;IACdZ,OAAO,CAACY,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;IACvD,OAAO,KAAK;EACd;AACF;AAEA,OAAO,SAASC,iBAAiBA,CAAA,EAAG;EAClC,IAAI;IACF,MAAMC,MAAM,GAAGN,YAAY,CAACO,OAAO,CAAClB,WAAW,CAAC;IAChD,IAAI,CAACiB,MAAM,EAAE,OAAO,IAAI;IAExB,MAAMf,OAAO,GAAGW,IAAI,CAACM,KAAK,CAACF,MAAM,CAAC;;IAElC;IACA,IAAI,CAACf,OAAO,IAAI,CAACA,OAAO,CAACkB,OAAO,IAAI,CAAClB,OAAO,CAACO,aAAa,EAAE;MAC1DN,OAAO,CAACC,IAAI,CAAC,gCAAgC,CAAC;MAC9CiB,mBAAmB,CAAC,CAAC;MACrB,OAAO,IAAI;IACb;IAEA,OAAOnB,OAAO;EAChB,CAAC,CAAC,OAAOa,KAAK,EAAE;IACdZ,OAAO,CAACY,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;IAC3DM,mBAAmB,CAAC,CAAC;IACrB,OAAO,IAAI;EACb;AACF;AAEA,OAAO,SAASA,mBAAmBA,CAAA,EAAG;EACpCV,YAAY,CAACW,UAAU,CAACtB,WAAW,CAAC;AACtC;AAEA,OAAO,SAASuB,iBAAiBA,CAAA,EAAG;EAClC,OAAOP,iBAAiB,CAAC,CAAC,KAAK,IAAI;AACrC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}